### 1. **인증서 신뢰 문제**

- **A서버**는 **B서버**와 통신할 때 **SSL/TLS** 프로토콜을 사용하여 보안 연결을 설정합니다. 이 과정에서 A서버는 B서버의 인증서를 검증하게 됩니다.
- 이 검증 과정에서 **A서버**는 B서버의 인증서가 신뢰할 수 있는 인증기관(CA)에 의해 서명되었는지, 또는 A서버가 B서버의 인증서를 직접 신뢰할 수 있는지 확인합니다.
- **B서버가 인증서를 교체**한 경우, A서버가 이전 인증서만 신뢰하도록 설정되어 있으면 새로운 인증서를 신뢰하지 못해 통신이 중단됩니다.

### 2. **JDK의 신뢰 저장소 (Truststore)**

- **JDK**는 SSL/TLS 통신을 할 때 **신뢰할 수 있는 인증서 목록**을 저장하는 **Truststore**라는 저장소를 사용합니다.
- **Truststore**에는 신뢰할 수 있는 **루트 인증기관(CA)**의 인증서가 기본적으로 포함되어 있습니다. 따라서, B서버의 인증서가 신뢰할 수 있는 CA에서 발급된 경우라면, Truststore에 이미 해당 CA의 인증서가 포함되어 있을 수 있습니다.
- 그러나 B서버가 **자체 서명 인증서**를 사용하거나 **신뢰할 수 없는 인증기관**에서 발급된 인증서를 사용하는 경우, A서버의 **Truststore에 해당 인증서를 수동으로 추가**해야 A서버가 B서버의 인증서를 신뢰할 수 있습니다.

### 3. **인증서 갱신 후 Truststore에 등록하는 이유**

- **인증서 갱신** 시, B서버의 인증서가 변경되면 A서버는 더 이상 새로운 인증서를 신뢰하지 못합니다.
- A서버가 새로운 인증서를 신뢰하려면 **JDK의 Truststore에 새로운 인증서를 등록**해야 합니다.
- 이렇게 하면, A서버는 B서버의 새로운 인증서를 신뢰하게 되어 다시 통신이 가능해집니다.

### 4. **Truststore에 인증서를 추가하는 과정**

**JDK의 Truststore에 인증서를 등록**하는 일반적인 과정은 다음과 같습니다:

1. **B서버의 새로운 인증서 추출**:
    
    - B서버에서 인증서를 다운로드하거나, 웹 브라우저를 통해 B서버의 인증서를 추출합니다.
2. **keytool 명령어를 사용해 Truststore에 인증서 추가**:
    
    - `keytool` 명령어는 JDK의 기본 도구로, 인증서를 **JDK Truststore**에 추가할 수 있습니다.
    - 일반적으로 JDK Truststore는 `cacerts`라는 파일로 저장되어 있습니다.
    
    `keytool -import -alias bserver-cert -file bserver.crt -keystore $JAVA_HOME/lib/security/cacerts`
    
    - 위 명령은 B서버의 인증서(`bserver.crt`)를 JDK의 Truststore(`cacerts`)에 추가하는 명령입니다.
    - `-alias`는 인증서를 구분하기 위한 별칭이고, `-file`은 등록할 인증서 파일, `-keystore`는 Truststore 파일입니다.
3. **JDK의 Truststore 비밀번호 입력**:
    
    - Truststore에 인증서를 추가할 때, 기본적으로 **비밀번호**가 필요합니다. 기본 비밀번호는 보통 `changeit`입니다(서버에 따라 다를 수 있음).

### 5. **왜 JDK Truststore에 등록하는가?**

- **SSL/TLS** 통신을 할 때, **JDK**는 신뢰할 수 있는 인증서를 Truststore에서 찾습니다. B서버의 인증서가 Truststore에 등록되지 않으면, JDK는 그 인증서를 신뢰할 수 없다고 판단해 통신이 거부됩니다.
- 따라서, **B서버의 인증서를 JDK Truststore에 등록**하는 것은 A서버가 새로운 인증서를 신뢰하게 하고, **서버 간 통신을 복구**하는 데 필요한 과정입니다.

### 결론:

B서버가 인증서를 교체한 후 A서버와 통신이 안 되는 이유는, **A서버의 JDK Truststore에 B서버의 새로운 인증서가 등록되지 않았기 때문**입니다. A서버가 새로운 인증서를 신뢰하도록 하려면, B서버의 인증서를 **JDK Truststore에 수동으로 등록**해야 합니다. 이 과정은 SSL/TLS 통신에서 인증서의 신뢰성을 보장하고, 안전한 서버 간 통신을 유지하는 데 필수적입니다.